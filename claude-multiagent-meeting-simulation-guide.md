### **AI開発者（Claude）向け指示書：多機関連携会議シミュレーションアプリの実装**

#### **1\. はじめに：このドキュメントの目的**

このドキュメントは、AIを搭載したインタラクティブな研修ツール「多機関連携会議シミュレーションアプリ」を、単一のHTMLファイルとして実装するための開発仕様書です。ここに記載された要件、機能、UIデザイン、そしてAIへの指示プロンプトに基づき、完全なアプリケーションを生成してください。

#### **2\. プロジェクト概要**

* **アプリの名称:** 多機関連携会議シミュレーション  
* **目的:** 障害福祉分野の支援者（特に学生や若手職員）が、多様なケースにおける多機関連携会議の進行スキルと、本人中心の支援マインドを実践的に学ぶための研修ツール。  
* **ターゲットユーザー:** 障害福祉を学ぶ学生、新人職員、その他関係機関の担当者。  
* **準拠する理念:** 厚生労働省の『就労選択支援実施マニュアル』に示される、本人中心の意思決定支援、客観的アセスメントに基づく連携、ストレングス（強み）に着目した支援の考え方を基本とします。

#### **3\. アプリのコア機能とユーザー体験**

ユーザーは、以下の3ステップでシミュレーションを体験します。

1. **【設定】:** 会議の前提条件（事前アセスメント情報、会議のゴール、進行パターンなど）をボタンで直感的に選択します。  
2. **【体験】:** 「シミュレーションを開始」ボタンを押すと、AIが設定に基づいたリアルな会議の会話ログを動的に生成します。ユーザーは、その会議の様子を読み進めます。  
3. **【学習】:** 会議終了後、ユーザーは「AIによる要約・提案」ボタンを押します。するとAIが会議全体を分析し、「会議の結論」と「次のステップへの創造的な提案」を生成します。これにより、ユーザーは会議の結果を整理し、次の支援への視点を学ぶことができます。

#### **4\. 実装すべき機能要件**

添付されている最新のモックアップ（simulation\_ui\_mockup\_01）のUIと機能を完全に再現してください。

##### **4.1. UIコンポーネント**

* **設定セクション:**  
  * **事前アセスメント情報:** 複数選択可能なチェックボックス群。  
  * **会議のゴールパス:** 3つの選択肢を持つボタングループ。  
  * **会議の進行パターン:** 2つの選択肢を持つボタングループ。  
  * **専門性の強調:** 3つの選択肢を持つボタングループ。  
  * 選択されたボタンは、視覚的にアクティブ状態がわかるようにスタイルを適用してください。  
* **実行ボタン:** 「AIでシミュレーションを開始」ボタン。  
* **表示セクション:**  
  * **シミュレーションログ表示エリア:** AIが生成した会話ログが表示される場所。  
  * **AI要約・提案ボタン:** ログ表示後に現れるボタン。  
  * **AI要約・提案表示エリア:** AIによる要約と提案が表示される場所。  
* **状態表示:**  
  * **ローディングインジケーター:** AIとの通信中に表示されるスピナー。  
  * **エラーモーダル:** API通信エラーなどが発生した際に表示されるダイアログ。

##### **4.2. JavaScriptロジック**

* **状態管理:** ユーザーが選択した設定（事前アセスメント、ゴールパス等）をJavaScriptのオブジェクトで管理します。  
* **イベント処理:**  
  * 各設定ボタンのクリックイベントを処理し、選択状態を更新します。  
  * 「開始」ボタンのクリックで、generateSimulationWithAI関数を呼び出します。  
  * 「AI要約」ボタンのクリックで、generateSummaryWithAI関数を呼び出します。  
* **API通信 (Gemini API):**  
  * callGemini(prompt)という非同期関数を実装してください。  
  * この関数は、引数で受け取ったプロンプトをGoogleのGemini API（gemini-2.5-flash-preview-05-20）に送信します。  
  * APIキーはコードに含めず、空文字列として定義してください。  
  * APIリクエストが失敗した場合に備え、指数バックオフを用いたリトライ処理（3回程度）を実装してください。  
* **DOM操作:**  
  * renderLog: AIが生成した会話ログを、表示エリアに適切にレンダリングします。  
  * renderSummary: AIが生成した要約・提案を、表示エリアに適切にレンダリングします。  
  * setLoading, showError: ローディングやエラーの状態に応じてUIを制御します。

#### **5\. 【最重要】AIへの指示プロンプトの仕様**

以下の2種類のプロンプトを、JavaScript内で動的に生成し、callGemini関数に渡してください。

##### **プロンプト1：会議シナリオ生成用**

あなたは、障害福祉分野における経験豊富な専門家です。本人中心の考え方を基に、以下の設定で「多機関連携会議」のリアルなシミュレーションシナリオを会話形式で生成してください。

\#\#\# 会議の基本情報  
\- 対象者: 佐藤太郎（18歳・男性）、知的障害（B2）・自閉スペクトラム症  
\- 強み: 手先が器用、高い集中力  
\- 課題: 突発的な変更に弱い、自発的なコミュニケーションが少ない  
\- 参加者: 田中(進行役), 佐藤太郎(本人), 佐藤(父), 山田(教員), 鈴木(B型), 伊藤(移行), 中村(相談), 佐々木(センター)

\#\#\# 今回のシミュレーション設定  
\- \*\*会議のゴールパス:\*\* ${ユーザーが選択したゴールパス}  
\- \*\*会議の進行パターン:\*\* ${ユーザーが選択した進行パターン}  
\- \*\*専門性の強調:\*\* ${ユーザーが選択した専門性}  
\- \*\*事前アセスメント情報:\*\*  
${ユーザーが選択した事前アセスメント情報}

\#\#\# 指示  
\- 上記の設定を忠実に反映し、各参加者の役割に応じた専門的な発言を盛り込んでください。  
\- 必ず佐藤太郎さん本人の意見や気持ちを複数回確認し、その発言を尊重して議論を進めてください。  
\- 会議の最後には、合意形成された「支援方針」「短期目標」「各機関の役割分担」を明確にまとめてください。  
\- 会話は自然な流れで、参加者名と発言を交互に記述してください。例: 「田中(進行役): (発言内容)」

##### **プロンプト2：会議要約・提案用**

あなたは経験豊富な障害福祉の専門家であり、多機関連携会議のファシリテーターです。  
以下の会議の会話ログを分析し、次の2つのタスクを実行してください。出力はHTML形式でお願いします。

1\.  \*\*会議の結論の要約:\*\*  
    以下の3つの項目で、会議で決定された事項を簡潔にまとめてください。見出しは\<h4\>タグで、内容は\<ul\>\<li\>タグで記述してください。  
    \* 支援方針  
    \* 短期目標(3ヶ月後)  
    \* 役割分担

2\.  \*\*✨ 次のステップへの創造的な提案:\*\*  
    会議の結果を踏まえ、佐藤太郎さん本人と支援チームが次に取り組むべき、具体的で希望の持てるアクションプランを3つ提案してください。単なるタスクリストではなく、本人の強み（例：手先の器用さ、集中力）を活かし、自己肯定感を高めるような、創造的でワクワクするような提案を心がけてください。見出しは\<h4\>タグで、各提案は\<p\>タグで記述してください。

【会議ログ】  
${生成された会話ログの全文}

#### **6\. 最終的な実装依頼**

以上の全ての仕様に基づき、このアプリケーションを、外部ファイルへの依存がない、単一のHTMLファイルとして完成させてください。