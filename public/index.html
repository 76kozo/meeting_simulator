<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>多機関連携会議シミュレーション</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>多機関連携会議シミュレーション</h1>
    </header>
    <!-- 設定選択セクション -->
    <div class="settings-container">
        <h2>シミュレーション設定</h2>
        
        <!-- ケース選択 -->
        <div class="form-group">
            <label>ケース選択:</label>
            <div class="button-group case-selection">
                <button type="button" class="setting-btn active" data-case="custom">カスタムケース</button>
                <button type="button" class="setting-btn" data-case="preset">固定ケース（佐藤太郎）</button>
            </div>
        </div>

        <!-- 事前アセスメント情報 -->
        <div class="form-group">
            <label>事前アセスメント情報:</label>
            <div class="checkbox-group">
                <label class="checkbox-item">
                    <input type="checkbox" name="assessment" value="work-observation"> 作業観察結果
                </label>
                <label class="checkbox-item">
                    <input type="checkbox" name="assessment" value="aptitude-test"> 適性検査結果
                </label>
                <label class="checkbox-item">
                    <input type="checkbox" name="assessment" value="interview-result"> 面談結果
                </label>
                <label class="checkbox-item">
                    <input type="checkbox" name="assessment" value="school-report"> 学校からの情報
                </label>
                <label class="checkbox-item">
                    <input type="checkbox" name="assessment" value="family-interview"> 家族面談結果
                </label>
                <label class="checkbox-item">
                    <input type="checkbox" name="assessment" value="medical-info"> 医療機関からの情報
                </label>
            </div>
        </div>

        <!-- 会議のゴールパス -->
        <div class="form-group">
            <label>会議のゴールパス:</label>
            <div class="button-group goal-path">
                <button type="button" class="setting-btn active" data-goal="consensus">合意形成重視</button>
                <button type="button" class="setting-btn" data-goal="exploration">選択肢探索重視</button>
                <button type="button" class="setting-btn" data-goal="empowerment">本人エンパワメント重視</button>
            </div>
        </div>

        <!-- 会議の進行パターン -->
        <div class="form-group">
            <label>会議の進行パターン:</label>
            <div class="button-group progress-pattern">
                <button type="button" class="setting-btn active" data-pattern="structured">構造化進行</button>
                <button type="button" class="setting-btn" data-pattern="flexible">柔軟な進行</button>
            </div>
        </div>

        <!-- 専門性の強調 -->
        <div class="form-group">
            <label>専門性の強調:</label>
            <div class="button-group expertise">
                <button type="button" class="setting-btn active" data-expertise="balanced">バランス重視</button>
                <button type="button" class="setting-btn" data-expertise="technical">専門的見解重視</button>
                <button type="button" class="setting-btn" data-expertise="person-centered">本人中心重視</button>
            </div>
        </div>
    </div>

    <div class="input-container" id="custom-input">
        <h2>シミュレーション情報入力</h2>
        <form id="simulation-form">
            <div class="form-group">
                <label for="basic-info">対象者の基本情報:</label>
                <textarea id="basic-info" name="basic-info" rows="6" required></textarea> <!-- rowsを4から6へ変更 -->
            </div>
            <div class="form-group">
                <label for="assessment-summary">アセスメント結果概要:</label>
                <textarea id="assessment-summary" name="assessment-summary" rows="6" required></textarea> <!-- rowsを5から6へ変更 -->
            </div>
            <div class="form-group">
                <label for="observation-points">就労選択支援事業での観察ポイント:</label>
                <textarea id="observation-points" name="observation-points" rows="5"></textarea> <!-- rowsを4から5へ変更 -->
            </div>
            <div class="form-group">
                <label for="participants">多機関連携会議の参加者 (役割と共に、改行区切りで入力):</label>
                <textarea id="participants" name="participants" rows="6" required></textarea> <!-- rowsを5から6へ変更 -->
                <small>例: 田中（就労選択支援員・進行役）<br>
                ※ 役割を明記することで、適切なアイコンと表示名が自動設定されます</small>
            </div>
            <button type="button" id="load-test-data">テストデータを読み込む</button>
            <button type="button" id="load-preset-data" style="display: none;">佐藤太郎ケースを読み込む</button>
            <button type="submit">シミュレーション開始</button>
        </form>
        <div id="loading-indicator" style="display: none; text-align: center; margin-top: 15px;">
            <p>シミュレーション生成中...</p>
            <!-- ここにスピナーなどを追加しても良い -->
        </div>
    </div>

    <!-- 段階的進行インジケーター -->
    <div class="step-progress" id="step-progress" style="display: none;">
        <div class="step-indicator">
            <div class="step-item pending" id="step-1">1. 開会・紹介</div>
            <div class="step-item pending" id="step-2">2. 観察報告</div>
            <div class="step-item pending" id="step-3">3. 希望確認</div>
            <div class="step-item pending" id="step-4">4. 情報共有</div>
            <div class="step-item pending" id="step-5">5. 意見交換</div>
            <div class="step-item pending" id="step-6">6. 方針確認</div>
        </div>
        <div class="step-controls">
            <button id="start-step-btn" class="step-btn">会議を開始</button>
            <button id="next-step-btn" class="step-btn" style="display: none;">次のステップへ</button>
        </div>
        <!-- タイピング速度調整 -->
        <div class="typing-controls">
            <div class="speed-control">
                <label for="typing-speed">タイピング速度:</label>
                <input type="range" id="typing-speed" class="speed-slider" min="20" max="200" value="80">
                <span id="speed-value">80</span> 文字/秒
            </div>
            <button id="skip-typing-btn" class="skip-btn">スキップ</button>
        </div>
    </div>

    <!-- タイピングインジケーター -->
    <div class="typing-indicator" id="typing-indicator">
        <span class="typing-text" id="typing-speaker">田中さんが入力中</span>
        <div class="typing-dots">
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
            <div class="typing-dot"></div>
        </div>
    </div>

    <div class="chat-container" id="chat-output">
        <!-- シミュレーション結果表示エリア -->
    </div>
    
    <div class="regenerate-container" style="display: none;">
        <button id="regenerate-btn" class="regenerate-btn">シミュレーションを再生成</button>
        <button id="generate-summary-btn" class="summary-btn">🎆 AI要約・提案を生成</button>
    </div>
    
    <div class="summary-container" id="summary-output" style="display: none;">
        <!-- AI要約・提案表示エリア -->
    </div>
    <script src="script.js"></script>
</body>
</html>